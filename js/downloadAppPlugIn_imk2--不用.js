(function(){var U=navigator.userAgent;var ae=U.match(/Chrome/i)!=null&&U.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i)==null?true:false;var af=(U.match(/(Android);?[\s\/]+([\d.]+)?/))?true:false;var a=(U.match(/(iPad).*OS\s([\d_]+)/))?true:false;var X=(U.match(/(Mac\sOS)\sX\s([\d_]+)/))?true:false;var x=(!a&&U.match(/(iPhone\sOS)\s([\d_]+)/))?true:false;var j=(x||a)&&U.match(/Safari/);var ac=0;var z=U.match(/(iPhone\sOS)\s([\d_]+)/);var B=(z&&z.length>2)?(z[2].split("_").length>0?z[2].split("_")[0]:""):"";j&&(ac=U.match(/Version\/([\d\.]+)/));try{ac=parseFloat(ac[1],10)}catch(ag){}var U=window.navigator.userAgent,Z=false;var Z=U.toUpperCase().indexOf("SAMSUNG-SM-N7508V")!=-1;var y="plugIn_downloadAppPlugIn_loadIframe";var A=false;var q=0;var P={};var m=null;var ab={};var D=window.Zepto||window.jQuery?true:false;var o=[];var E=window.localStorage?true:false;var f=Math.floor(Math.random()*100)+1;var b=false;var u=false;var L={closeUaAjax:false,keplerAjax:false,configCenterAjax:false};var g={AROUSAL_APP:true,DOWNLOAD_LAYER:true,GENERAL_HEAD:true,msf_type:"auto",cooldown_time:0,scheme_prame:"",use_universallinks:true};var c={keplerID:null,keplerFrom:1,keplerParamJson:null};var T={isUniversalLinksUa:false,isUniversalLinksOs:false,isUseUniversalLinks:false};var t={url:"../../../../../https@mapi.mjdcom/config/display.action@_format_=json&domain="+encodeURI(document.referrer),method:"POST",async:true,timeout:1000,withCredentials:true,hasAjax:"configCenterAjax",hasAjaxSend:false,error:function(){L.configCenterAjax=true},success:function(e){L.configCenterAjax=true;e=JSON.parse(e);M(e)}};var K={url:"../../../../../https@so.mjdcom/downLoad/closeUa.action@_format_=json",method:"POST",async:true,timeout:1000,hasAjax:"closeUaAjax",hasAjaxSend:false,error:function(){L.closeUaAjax=true},success:function(e){L.closeUaAjax=true;e=JSON.parse(e);ah(e)}};function s(){var ai=new Date();var aj=ai.getFullYear();var ak=ai.getMonth()+1;var e=ai.getDate();strDate=aj+"-"+ak+"-"+e;return strDate}function k(aj,ai,e){if(D){m("#"+aj).bind(ai,e)}else{m("#"+aj).addEventListener(ai,e,!1)}}function N(e){var ai=(e||"mGen")+(++q);return ai}if(D){m=window.$;ab=window.$}else{m=function(e){if(typeof e=="object"){return e}return document.querySelector(e)};if(!window.$){window.$=ab=m}else{ab=window.$}}window.onblur=function(){for(var e=0;e<o.length;e++){clearTimeout(o[e])}};function l(aj){var ai=document.cookie.indexOf(aj+"=");if(ai==-1){return""}ai=ai+aj.length+1;var e=document.cookie.indexOf(";",ai);if(e==-1){e=document.cookie.length}return document.cookie.substring(ai,e)}function r(aj,al,e,am,ak){var an=aj+"="+escape(al);if(e!=""){var ai=new Date();ai.setTime(ai.getTime()+e*24*3600*1000);an+=";expires="+ai.toGMTString()}if(am!=""){an+=";path="+am}if(ak!=""){an+=";domain="+ak}document.cookie=an}function V(aj,am){var al=null;if(am){al={downAppURl:"../../../../../h5.mjdcom/active/download/download.html@channel=jd-m",downAppIos:"../../../../../https@itunes.apple.com/us/app/jing-dong-wang-gou-shou-dan/id414245413",downWeixin:"../../../../../a.app.qq.com/o/simple.jsp@pkgname=com.jingdong.app.mall&g_f=991850",downIpad:"../../../../../https@itunes.apple.com/cn/app/jing-dong-hd/id434374726@mt=8",inteneUrl:"openapp.jdmobile://virtual?",inteneUrlParams:null,sourceType:"JSHOP_SOURCE_TYPE",sourceValue:"JSHOP_SOURCE_VALUE",M_sourceFrom:"mxz",NoJumpDownLoadPage:false,kepler_param:null,autoOpenAppEventId:"MDownLoadFloat_AppArouse",autoOpenAppEventParam:"",autoOpenIntervalTime:0,cookieFlag:null,noJdApp:false,universalLinksUrl:"../../../../../https@linkst.mjdcom"}}else{al={downAppURl:"../../../../../h5.mjdcom/active/download/download.html@channel=jd-m",downAppIos:"../../../../../https@itunes.apple.com/us/app/jing-dong-wang-gou-shou-dan/id414245413",downWeixin:"../../../../../a.app.qq.com/o/simple.jsp@pkgname=com.jingdong.app.mall&g_f=991850",downIpad:"../../../../../https@itunes.apple.com/cn/app/jing-dong-hd/id434374726@mt=8",inteneUrl:"openapp.jdmobile://virtual?",inteneUrlParams:null,openAppBtnId:"",closePanelBtnId:"",closePanelId:"",openAppCallback:null,openAppCallbackSource:null,closeCallblack:null,closeCallblackSource:null,cookieFlag:null,sourceType:"JSHOP_SOURCE_TYPE",sourceValue:"JSHOP_SOURCE_VALUE",openAppEventId:"MDownLoadFloat_OpenNow",openAppEventParam:"",closePanelEventId:"MDownLoadFloat_Close",closePanelEventParam:"",appDownCloseIntervalTime:86400000,appDownOpenIntervalTime:0,noRecord:false,isnotWriteOpenAppCookie:false,M_sourceFrom:"mxz",msf_type:"click",NoJumpDownLoadPage:false,kepler_param:null,noJdApp:false,universalLinksUrl:"../../../../../https@linkst.mjdcom"}}if(aj){for(var ak in aj){if((ak&&aj[ak])||(ak=="appDownCloseIntervalTime"&&aj[ak]==0)||(ak=="appDownOpenIntervalTime"&&aj[ak]==0)||(ak=="autoOpenIntervalTime"&&aj[ak]==0)){if(ak=="appDownCloseIntervalTime"||ak=="appDownOpenIntervalTime"||ak=="autoOpenIntervalTime"){var ao=/^(-     |\+)?\d+$/;if(ao.test(aj[ak])&&aj[ak]>=0){try{var ai=parseInt(aj[ak],10);al[ak]=ai}catch(an){}}}else{al[ak]=aj[ak]}}}}return al}function d(aj){var am=n(aj,true);var ak=aj.universalLinksUrl+"/ul/ul.action?"+am;if(navigator.userAgent.indexOf("baidubrowser")>=0){window.location.href=ak}else{var ai=document.createElement("a");ai.setAttribute("href",ak);ai.style.display="none";document.body.appendChild(ai);var al=document.createEvent("HTMLEvents");al.initEvent("click",!1,!1);ai.dispatchEvent(al)}}function F(e){var al=n(e);var ai=null;if(a){ai=e.downIpad}else{if(x){ai=e.downAppIos}else{ai=e.downAppURl}}if(ae){if(af){var ak=al;al=J(ak);setTimeout(function(){window.location.href=al},50)}}if((j&&ac>=9)||X||Z){setTimeout(function(){var am=document.createElement("a");am.setAttribute("href",al);am.style.display="none";document.body.appendChild(am);var an=document.createEvent("HTMLEvents");an.initEvent("click",!1,!1);am.dispatchEvent(an)},0)}else{document.querySelector("#"+y).src=al}if(!e.NoJumpDownLoadPage){var aj=Date.now();setTimeout(function(){var am=setTimeout(function(){H(aj,ai)},1500);o.push(am)},100)}}function H(aj,ai){var e=Date.now();if(aj&&(e-aj)<(1500+200)){window.location.href=ai}}function n(al,ai){var aw=[];var ao=al.inteneUrlParams;var au={category:"jump",des:"HomePage"};if(al.sourceType&&al.sourceValue){au.sourceType=al.sourceType;au.sourceValue=al.sourceValue;if(ao&&!ao.sourceType&&!ao.sourceValue){ao.sourceType=al.sourceType;ao.sourceValue=al.sourceValue}}if(al&&al.M_sourceFrom){au.M_sourceFrom=al.M_sourceFrom;if(ao){ao.M_sourceFrom=al.M_sourceFrom}}if(ao){for(var av in ao){if(av&&ao[av]){aw.push('"'+av+'":"'+ao[av]+'"')}}}else{for(var av in au){if(av&&au[av]){aw.push('"'+av+'":"'+au[av]+'"')}}}if(al&&al.msf_type){aw.push('"msf_type":"'+al.msf_type+'"')}if(c.keplerID){aw.push('"keplerID":"'+c.keplerID+'"');aw.push('"keplerFrom":"'+c.keplerFrom+'"')}if(c.keplerParamJson){aw.push('"kepler_param":'+c.keplerParamJson)}if(ai){aw.push('"NoJumpDownLoadPage":'+al.NoJumpDownLoadPage);aw.push('"downAppIos":"'+encodeURIComponent(al.downAppIos)+'"');aw.push('"locationHref":"'+encodeURIComponent(window.location.href)+'"')}try{var ap=MPing.EventSeries.getSeries();if(ap){var ax=JSON.parse(ap);ax.jdv=encodeURIComponent(l("__jdv"));ax.unpl=encodeURIComponent(l("unpl"));ax.mt_xid=encodeURIComponent(l("mt_xid"));ax.mt_subsite=encodeURIComponent(l("mt_subsite"))}var at={mt_subsite:encodeURIComponent(l("mt_subsite")),__jdv:encodeURIComponent(l("__jdv")),unpl:encodeURIComponent(l("unpl")),__jda:encodeURIComponent(l("__jda"))};ap=JSON.stringify(ax);aw.push('"m_param":'+ap);aw.push('"SE":'+JSON.stringify(at))}catch(ar){aw.push('"m_param":null')}var ak="{"+aw.join(",")+"}";var an=al.inteneUrl.split("?");var aj=null;var aq="";if(g.scheme_prame){aq="../../../../"+g.scheme_prame}if(an.length==2){aj=an[0]+aq+"?"+an[1]+"&params="+ak}else{aj=an[0]+aq+"@params="+ak}var am={url:""+encodeURI(ak)+"&openapp_source_type=100",method:"POST",async:true,timeout:1000,error:function(){},success:function(e){}};I(am);return aj}function J(e){return"intent_3A//mjdcom/#Intent;scheme="+e+";package=com.jingdong.app.mall;end"}function v(e){if(e.openAppBtnId&&document.querySelector("#"+e.openAppBtnId)){P[e.openAppBtnId]=e;Y(e.openAppBtnId,e.openAppEventId,e.openAppEventParam);k(e.openAppBtnId,"click",function(){var am=this.getAttribute("id");var ai=P[am];if(!A){var ak=document.createElement("iframe");ak.id=y;document.body.appendChild(ak);document.getElementById(y).style.display="none";document.getElementById(y).style.width="0px";document.getElementById(y).style.height="0px";A=true}if(ai.openAppCallback){var aj=ai.openAppCallbackSource?ai.openAppCallbackSource:null;ai.openAppCallback.call(this,aj)}if(!ai.isnotWriteOpenAppCookie&&ai.appDownOpenIntervalTime){var al=ai.cookieFlag?"downloadAppPlugIn_downCloseDate_"+ai.cookieFlag:"downloadAppPlugIn_downCloseDate";r(al,Date.now()+"_"+ai.appDownOpenIntervalTime,60,"../../../../default.htm",".mjdcom");r(al,Date.now()+"_"+ai.appDownOpenIntervalTime,60,"../../../../default.htm","mjdhk")}W(ai);if(T.isUseUniversalLinks&&!ai.noJdApp){d(ai)}else{F(ai)}})}}function S(e){if(e.closePanelBtnId&&e.closePanelId&&document.querySelector("#"+e.closePanelId)&&document.querySelector("#"+e.closePanelBtnId)){P[e.closePanelBtnId]=e;Y(e.closePanelBtnId,e.closePanelEventId,e.closePanelEventParam);if(O(e)){document.querySelector("#"+e.closePanelId).style.display="none";if(e.closeCallblack){var aj=event||window.event;var ai=e.closeCallblackSource?e.closeCallblackSource:null;e.closeCallblack.call(this,ai,aj)}return}else{document.querySelector("#"+e.closePanelId).style.display="block"}k(e.closePanelBtnId,"click",function(){var ao=this.getAttribute("id");var ak=P[ao];var an=ak.cookieFlag?"downloadAppPlugIn_downCloseDate_"+ak.cookieFlag:"downloadAppPlugIn_downCloseDate";if(!ak.noRecord&&ak.appDownCloseIntervalTime&&ak.appDownCloseIntervalTime!=0){r(an,Date.now()+"_"+ak.appDownCloseIntervalTime,60,"../../../../default.htm","mjdcom");r(an,Date.now()+"_"+ak.appDownCloseIntervalTime,60,"../../../../default.htm","mjdhk")}document.querySelector("#"+ak.closePanelId).style.display="none";if(ak.closeCallblack){var am=event||window.event;var al=ak.closeCallblackSource?ak.closeCallblackSource:null;ak.closeCallblack.call(this,al,am)}})}}function O(aj,ap){var ak=false;var ao=null;if(ap){if(g.msf_type&&g.msf_type=="auto"){ao=(aj.cookieFlag&&aj.autoOpenIntervalTime)?"autoOpenApp_downCloseDate_"+aj.cookieFlag:"autoOpenApp_downCloseDate_"+g.msf_type}else{ao="autoOpenApp_downCloseDate_"+g.msf_type}if(u||!g.AROUSAL_APP){ak=true}}else{var ai=U.indexOf("jdmsxh");var al=U.indexOf("jdmsxh2");if(U.indexOf("Html5Plus")>=0||(ai>=0&&ai!=al)||b||!g.DOWNLOAD_LAYER){ak=true}ao=aj.cookieFlag?"downloadAppPlugIn_downCloseDate_"+aj.cookieFlag:"downloadAppPlugIn_downCloseDate"}var am=l(ao);var an=null;if(am){an=am.split("_");if(an.length==2){an[0]=parseInt(an[0],10);an[1]=parseInt(an[1],10)}else{an=null}}var e=Date.now();if(!ak&&!aj.noRecord&&an&&an.length==2&&(e-an[0])<an[1]&&(aj.closePanelBtnId||ap)){ak=true}return ak}function I(aj){var ai;try{ai=new ActiveXObject("Msxml2.XMLHTTP")}catch(al){try{ai=new ActiveXObject("Microsoft.XMLHTTP")}catch(al){ai=new XMLHttpRequest()}}ai.ajaxRunError=true;if(aj.withCredentials){try{ai.withCredentials=true}catch(al){}}try{ai.open(aj.method,aj.url,aj.async);if(aj.timeout){var ak=aj.source?aj.source:null;setTimeout(function(){if(ai.ajaxRunError){ai.onreadystatechange=function(){};ai.abort();aj.error.call(ak)}},aj.timeout)}ai.onreadystatechange=function(){var am=aj.source?aj.source:null;if(ai.readyState==4){if(ai.status==200){ai.ajaxRunError=false;var e=ai.responseText;aj.success.call(am,e)}else{aj.error.call(am)}}};ai.send(null)}catch(al){}}function Y(an,ak,ai){try{var am=document.getElementById(an);var aj=am.className;if(aj){aj=aj+" J_ping"}else{aj="J_ping"}am.className=aj;am.setAttribute("report-eventid",ak);if(ai){am.setAttribute("report-eventparam",ai)}}catch(al){}}function i(ak,ai){try{var al=new MPing.inputs.Click(ak);if(ai){al.event_param=ai}var aj=new MPing();aj.send(al)}catch(am){}}function w(ai,ao,av){var aj=ao?ao:1;var ap=av?true:false;if(!O(ai)&&ai.closePanelId){var aw=document.getElementById(ai.closePanelId);if(aw){var at=aw.getBoundingClientRect();var au=at.height||at.bottom-at.top;var an=R(aw,"opacity");var ar=R(aw,"display");if(ar&&au&&ar!="none"&&au==0){ap=true}else{if(au&&an&&au==50&&an==0){ap=true}}}else{ap=true}if(aj<3&&ap==false){aj++;setTimeout(function(){w(ai,aj,ap)},2000)}}if(ap){try{var al=new MPing.inputs.Click("MDownLoadFloat_FloatShield");var am=new MPing();al.event_param=ai.openAppEventId;am.send(al);var ak={url:"../../../../../so.mjdcom/downLoad/checkShield.action@_format_=json",method:"POST",async:true,timeout:1000,error:function(){},success:function(e){}};I(ak)}catch(aq){}}}function R(ai,e){if(ai.currentStyle){return ai.currentStyle[e]}else{return document.defaultView.getComputedStyle(ai,false)[e]}}function C(al,aj){var ak=aj?false:O(al.funcPrame);var e=true;if(!ak&&al&&Object.prototype.toString.apply(al.ajaxPrame)==="[object Array]"&&al.ajaxPrame.length>0){al.ajaxPrameIsArray=true;for(var ai=0;ai<al.ajaxPrame.length;ai++){if(!L[al.ajaxPrame[ai].hasAjax]){e=false;if(!al.ajaxPrame[ai].hasAjaxSend){I(al.ajaxPrame[ai]);al.ajaxPrame[ai].hasAjaxSend=true}}}}else{if(!ak&&!L[al.ajaxPrame.hasAjax]){e=false;if(!al.ajaxPrame.hasAjaxSend){I(al.ajaxPrame);al.ajaxPrame.hasAjaxSend=true}}}if(e){p(al.funcList,al.funcPrame)}else{ad(al)}}function ad(al,ai){var ak=ai?ai:0;var e=true;if(al.ajaxPrameIsArray){for(var aj=0;aj<al.ajaxPrame.length;aj++){if(!L[al.ajaxPrame[aj].hasAjax]){e=false;break}}}else{e=L[al.ajaxPrame.hasAjax]}if(al.funcList&&al.funcList.length>0){if(e){p(al.funcList,al.funcPrame)}else{setTimeout(function(){ak++;if(ak<20){ad(al,ak)}else{p(al.funcList,al.funcPrame)}},50)}}}function p(e,aj){if(e.length==1&&Object.prototype.toString.apply(e)==="[object Function]"){e(aj)}else{for(var ai=0;ai<e.length;ai++){e[ai](aj)}}}function ah(al){if(al&&al.ua){al=JSON.parse(al.ua);if(al&&al.clickCloseUa){var am=al.clickCloseUa.split("|");for(var aj=0;aj<am.length;aj++){var ai=am[aj];if(ai&&U.indexOf(ai)>=0){b=true;break}}}if(al&&al.autoCloseBrowser){for(var aj=0;aj<al.autoCloseBrowser.length;aj++){var e=al.autoCloseBrowser[aj];if(e.browser&&e.abtest&&U.indexOf(e.browser)>=0){aa(e.abtest);break}}}if(!u&&al&&al.autoCloseOs){for(var aj=0;aj<al.autoCloseOs.length;aj++){var e=al.autoCloseOs[aj];if(e.os=="IOS"&&e.abtest&&(a||x)){aa(e.abtest);break}else{if(e.os=="Android"&&e.abtest&&af){aa(e.abtest);break}}}}if(!u&&al&&al.autoCloseOsAndBrowser){for(var aj=0;aj<al.autoCloseOsAndBrowser.length;aj++){var e=al.autoCloseOsAndBrowser[aj];if(e.os&&e.browser&&e.abtest&&e.os=="IOS"&&(a||x)&&U.indexOf(e.browser)>=0){aa(e.abtest);break}if(e.os&&e.browser&&e.abtest&&e.os=="Android"&&af&&U.indexOf(e.browser)>=0){aa(e.abtest);break}}}if(al&&al.universalLinksUa){var ak=al.universalLinksUa.split("|");for(var aj=0;aj<ak.length;aj++){var ai=ak[aj];if(ai&&U.indexOf(ai)>=0&&!af){T.isUniversalLinksUa=true;break}}}if(al&&al.universalLinksOs){var an=al.universalLinksOs.split("|");for(var aj=0;aj<an.length;aj++){var ai=an[aj];if(ai&&B&&ai==B&&B>8){T.isUniversalLinksOs=true;break}}}}}function M(e){if(e){if(e.data){for(var aj=0;aj<e.data.length;aj++){var ai=e.data[aj];if(ai.compent&&g.hasOwnProperty(ai.compent)){g[ai.compent]=ai.display;if(ai.compent=="AROUSAL_APP"&&ai.msf_type){g.msf_type=ai.msf_type;if(e.cooldown&&e.cooldown[ai.msf_type]){g.cooldown_time=e.cooldown[ai.msf_type]}if(ai.openAppParam){g.scheme_prame=ai.openAppParam}if(ai.hasOwnProperty("isSpportUL")&&!ai.isSpportUL){g.use_universallinks=false}}}}}if(e.kepler){if(e.kepler.kepler_data&&e.kepler.kepler_data.keplerID&&e.kepler.kepler_data.keplerFrom){c.keplerID=e.kepler.kepler_data.keplerID;c.keplerFrom=e.kepler.kepler_data.keplerFrom}if(e.kepler.kepler_param){c.keplerParamJson=JSON.stringify(e.kepler.kepler_param)}}}}function h(e){if(!O(e,true)){if(g.msf_type&&g.msf_type=="auto"){if(e.cookieFlag&&e.autoOpenIntervalTime){cookieName="autoOpenApp_downCloseDate_"+e.cookieFlag}else{cookieName="autoOpenApp_downCloseDate_"+g.msf_type;e.autoOpenIntervalTime=g.cooldown_time}}else{cookieName="autoOpenApp_downCloseDate_"+g.msf_type;e.autoOpenIntervalTime=g.cooldown_time}if(e.autoOpenIntervalTime){r(cookieName,Date.now()+"_"+e.autoOpenIntervalTime,60,"../../../../default.htm",".mjdcom");r(cookieName,Date.now()+"_"+e.autoOpenIntervalTime,60,"../../../../default.htm","mjdhk")}W(e);i(e.autoOpenAppEventId,e.autoOpenAppEventParam);e.msf_type=g.msf_type;F(e)}}function aa(e){if(e&&f<=e){u=true}}function W(e){if(e&&e.kepler_param){c.keplerParamJson=e.kepler_param}if(c.keplerParamJson){i("MDownLoadFloat_ArouseParam",c.keplerParamJson)}}function G(e){if(T.isUniversalLinksOs&&T.isUniversalLinksUa&&!e.noJdApp&&e.universalLinksUrl&&g.use_universallinks){T.isUseUniversalLinks=true}}function Q(e){var ai=V(e);v(ai);var aj={ajaxPrame:[K,t],funcList:[G,S,w],funcPrame:ai};C(aj)}ab.downloadAppPlugIn=Q;ab.downloadAppPlugInOpenApp=function(e){var ai=V(e,true);if(!A){var aj=document.createElement("iframe");aj.id=y;document.body.appendChild(aj);document.getElementById(y).style.display="none";document.getElementById(y).style.width="0px";document.getElementById(y).style.height="0px";A=true}var ak={ajaxPrame:[K,t],funcList:h,funcPrame:ai};C(ak,true)}})();